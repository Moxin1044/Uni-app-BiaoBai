if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(t){const e=this.constructor;return this.then((a=>e.resolve(t()).then((()=>a))),(a=>e.resolve(t()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const t=uni.requireGlobal();ArrayBuffer=t.ArrayBuffer,Int8Array=t.Int8Array,Uint8Array=t.Uint8Array,Uint8ClampedArray=t.Uint8ClampedArray,Int16Array=t.Int16Array,Uint16Array=t.Uint16Array,Int32Array=t.Int32Array,Uint32Array=t.Uint32Array,Float32Array=t.Float32Array,Float64Array=t.Float64Array,BigInt64Array=t.BigInt64Array,BigUint64Array=t.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(t){"use strict";function e(t,e,...a){uni.__log__?uni.__log__(t,e,...a):console[t].apply(console,[...a,e])}__definePage("pages/index/index",((t,e)=>{const a=t.__vccOpts||t;for(const[r,n]of e)a[r]=n;return a})({data:()=>({particles:[],numParticles:80,canvasWidth:0,canvasHeight:0,backgroundColorIndex:0,backgroundColors:["#fce4ec","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#ff80ab","#ff4081","#ff69b4"],scrollTexts:[],maxScrollTexts:8,scrollTextSpeedRange:[1,3],scrollTextList:["我真的好喜欢你，像风走过了八千里。","时光冗长，但我的心里只有你。","愿与你共度每一个明天。","你的笑容是我最大的动力。","谢谢你走进我的世界。","你是我藏在呼吸里的温柔。","想和你一起等花开花落。","你的名字是我写在星河里的诗。","连晚霞都嫉妒我们的相遇。","你眼中的光，照亮了我的四季。","想把每个清晨煮成茶，慢慢陪你过完这一生。","若三生有幸，只愿与你共赏同一轮明月。","你心跳的频率，是我最安心的时钟。","你的存在，让平凡的日子泛着微光。","我穿越人海而来，只为触碰你指尖的温度。","你是我的唯一依恋。","与你在一起，每一天都是幸福。","你的爱，是我一生中最美的遇见。","希望我们的故事永不结束。","感谢有你，让我成为更好的自己。","你的笑容是我最美的回忆。","每一刻与你相伴，都是生命的馈赠。","你是我心中的阳光，驱散一切阴霾。","与你同行，是我最明智的选择。","你的温暖，让我心安。","每一天都有你在身边，就是最好的日子。","你是我生命中最亮的星。","因为你，这个世界变得更加美好。","你的陪伴，是我前行的动力。","爱你，是我一生中最美好的决定。","我这辈子就喜欢你！","每一天都在期待与你相见。","第一次和你牵手，我的心扑通扑通的~","抱着你真的好温暖"],fullText:"我好喜欢你",displayedText:"",typingSpeed:150}),onReady(){const{windowWidth:t,windowHeight:e}=uni.getSystemInfoSync();this.canvasWidth=t,this.canvasHeight=e;const a=uni.createCanvasContext("loveCanvas",this);this.particles=Array.from({length:this.numParticles},(()=>this.createParticle())),setInterval((()=>{this.backgroundColorIndex=(this.backgroundColorIndex+1)%this.backgroundColors.length,this.changeBackgroundColor()}),2e3),this.addRandomScrollText(),this.animate(a),this.startTypingEffect()},methods:{createParticle(t=null,e=null){return{x:t??Math.random()*this.canvasWidth,y:e??Math.random()*this.canvasHeight,dx:1.5*(Math.random()-.5),dy:1.5*(Math.random()-.5),size:6*Math.random()+6,opacity:.6*Math.random()+.4}},drawHeart(t,e,a,r,n,i){t.save(),t.translate(e,a),t.scale(r/10,r/10),t.beginPath(),t.moveTo(0,-3),t.bezierCurveTo(-5,-15,-15,-5,0,5),t.bezierCurveTo(15,-5,5,-15,0,-3),t.setFillStyle(n),t.setGlobalAlpha(i),t.fill(),t.restore()},animate(t){t.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.particles.forEach((e=>{e.x+=e.dx,e.y+=e.dy,(e.x<0||e.x>this.canvasWidth)&&(e.dx*=-1),(e.y<0||e.y>this.canvasHeight)&&(e.dy*=-1),this.drawHeart(t,e.x,e.y,e.size,"#ff69b4",e.opacity)})),this.updateAndDrawScrollTexts(t),t.draw(!1,(()=>requestAnimationFrame((()=>this.animate(t)))))},addParticles(t){const{clientX:e,clientY:a}=t.touches[0];this.particles.push(...Array.from({length:10},(()=>this.createParticle(e,a))))},changeBackgroundColor(){const t=document.querySelector(".container");t&&(t.style.backgroundColor=this.backgroundColors[this.backgroundColorIndex])},addRandomScrollText(){if(this.scrollTexts.length>=this.maxScrollTexts)return;const t=this.scrollTextList[Math.floor(Math.random()*this.scrollTextList.length)],e=Math.random()*this.canvasHeight,a=Math.random()*(this.scrollTextSpeedRange[1]-this.scrollTextSpeedRange[0])+this.scrollTextSpeedRange[0];let r=this.canvasWidth;for(;!this.isPositionAvailable(r,e,t);)r-=10;this.scrollTexts.push({text:t,x:r,y:e,speed:a}),setTimeout(this.addRandomScrollText,2e3)},isPositionAvailable(t,e,a){const r=uni.createCanvasContext("loveCanvas",this);r.setFontSize(20);const n=r.measureText(a).width;return!this.scrollTexts.some((a=>{const i=r.measureText(a.text).width;return t<a.x+i&&t+n>a.x&&e<a.y+20&&e+20>a.y}))},updateAndDrawScrollTexts(t){t.setFontSize(20),t.setFillStyle("#ffffff"),this.scrollTexts=this.scrollTexts.filter((e=>(e.x-=e.speed,!(e.x+t.measureText(e.text).width<0)&&(t.fillText(e.text,e.x,e.y),!0))))},startTypingEffect(){let t=0;const e=setInterval((()=>{this.displayedText=this.fullText.slice(0,t++),t>this.fullText.length&&clearInterval(e)}),this.typingSpeed)}}},[["render",function(e,a,r,n,i,s){return t.openBlock(),t.createElementBlock("view",{class:"container",onClick:a[0]||(a[0]=(...t)=>s.addParticles&&s.addParticles(...t))},[t.createElementVNode("view",{class:"text"},t.toDisplayString(i.displayedText),1),t.createElementVNode("canvas",{"canvas-id":"loveCanvas",id:"loveCanvas",class:"canvas"})])}]]));const a={onLaunch:function(){e("log","at App.vue:4","App Launch")},onShow:function(){e("log","at App.vue:7","App Show")},onHide:function(){e("log","at App.vue:10","App Hide")}};const{app:r,Vuex:n,Pinia:i}={app:t.createVueApp(a)};uni.Vuex=n,uni.Pinia=i,r.provide("__globalStyles",__uniConfig.styles),r._component.mpType="app",r._component.render=()=>{},r.mount("#app")}(Vue);
